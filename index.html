<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Puzzled.org – Auto Game Loader</title>
  <style>
    body {
      background: #111;
      color: white;
      font-family: Arial;
      text-align: center;
      padding: 20px;
    }
    #games {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }
    .btn {
      padding: 12px 18px;
      background: #222;
      border: 1px solid #555;
      border-radius: 8px;
      cursor: pointer;
      color: white;
      transition: 0.2s;
    }
    .btn:hover {
      background: #333;
    }
    iframe {
      margin-top: 20px;
      width: 90%;
      height: 600px;
      border: none;
      background: white;
    }
  </style>
</head>
<body>

<h1>Puzzled.org</h1>
<p>Brute‑Force Game Loader (auto detects your games)</p>

<div id="games">Loading games…</div>

<iframe id="frame"></iframe>

<script>
// brute-force list of possible game names
const possibleNames = [
  "game", "index", "main", "play", "level", "start",
  "1", "2", "3", "4", "5", "6",
  "a", "b", "c", "d", "e", "f",
  "puzzle", "maze", "runner", "escape", "block", "brick",
  // automatic 3-letter combinations
];

let letters = "abcdefghijklmnopqrstuvwxyz";
for (let a of letters) {
  for (let b of letters) {
    for (let c of letters) {
      possibleNames.push(a + b + c);
    }
  }
}

const gamesDiv = document.getElementById("games");
const frame = document.getElementById("frame");

let foundGames = [];

async function fileExists(path) {
  try {
    let res = await fetch(path, { method: "HEAD" });
    return res.ok;
  } catch {
    return false;
  }
}

async function detectGames() {
  gamesDiv.innerHTML = "Scanning for games… (this may take 10–20 seconds)";

  for (let name of possibleNames) {
    let path = `/games/${name}.html`;

    if (await fileExists(path)) {
      foundGames.push(path);
      addButton(path);
    }
  }

  if (foundGames.length === 0) {
    gamesDiv.innerHTML = "❌ No games found.<br>Add .html files inside /games/";
  }
}

function addButton(path) {
  if (gamesDiv.innerHTML.includes("Scanning")) gamesDiv.innerHTML = "";

  let btn = document.createElement("button");
  btn.className = "btn";
  btn.textContent = path.replace("/games/", "");
  btn.onclick = () => {
    frame.src = path;
  };
  gamesDiv.appendChild(btn);
}

detectGames();
</script>

</body>
</html>
