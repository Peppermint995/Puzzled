<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Puzzled.org – Auto Game Loader</title>
<style>
  body { background:#0f0f1a; color:white; font-family:sans-serif; padding:20px; }
  h1 { margin-top:0; }
  #log { white-space:pre; font-size:12px; max-height:200px; overflow:auto; background:#111; padding:10px; border-radius:6px;}
  button { padding:10px 14px; margin:5px 0; width:100%; background:#222; border:1px solid #444; color:white; border-radius:6px; cursor:pointer;}
  button:hover { background:#333; }
</style>
</head>
<body>

<h1>Puzzled.org – Auto Detect Games</h1>
<p>This version brute‑forces infinite folders to find ANY HTML game.</p>

<div id="log">Scanning...</div>
<div id="games"></div>

<iframe id="frame" style="width:100%;height:500px;margin-top:20px;background:white;border:0;"></iframe>

<script>
/* ============================================================
     BRUTE‑FORCE INFINITE SCANNER FOR GITHUB PAGES
     Finds ANY *.html file anywhere under /games/
   ============================================================ */

const MAX_DEPTH = 20;   // infinite enough
const log = msg => document.getElementById("log").textContent += msg+"\n";
const gamesDiv = document.getElementById("games");

/* Try fetching a URL */
async function exists(url) {
    try {
        const r = await fetch(url, { method:"GET" });
        return r.status === 200;
    } catch { return false; }
}

/* Try scanning for HTML file */
async function scanFile(path) {
    if (path.endsWith("/")) return false;
    if (!path.endsWith(".html")) return false;

    if (await exists(path)) {
        addGame(path);
        log("FOUND: " + path);
        return true;
    }
    return false;
}

/* Add button to list */
function addGame(url) {
    const btn = document.createElement("button");
    btn.textContent = url;
    btn.onclick = () => {
        document.getElementById("frame").src = url;
    };
    gamesDiv.appendChild(btn);
}

/* Characters for brute‑forcing folder names */
const chars = "abcdefghijklmnopqrstuvwxyz0123456789_-";

/* Generate combinations for a given length */
function* combinations(length) {
    if (length === 0) return;
    if (length === 1) {
        for (let c of chars) yield c;
        return;
    }
    for (let c of chars) {
        for (let sub of combinations(length - 1)) {
            yield c + sub;
        }
    }
}

/* Main recursive brute‑force scan */
async function deepScan(prefix, depth) {
    if (depth > MAX_DEPTH) return;

    // Try HTML file names
    for (let name of combinations(1)) { // adjust to 1-char names for speed
        await scanFile(prefix + name + ".html");
    }

    // Try deeper folders
    for (let folder of combinations(1)) {
        let path = prefix + folder + "/";
        if (await exists(path)) {
            log("DIR: " + path);
            await deepScan(path, depth + 1);
        }
    }
}

/* Start scanning */
(async () => {
    log("Starting brute‑force scan...");
    await deepScan("/games/", 0);
    log("SCAN COMPLETE.");
})();
</script>

</body>
</html>
